DROP DATABASE IF EXISTS ecotrade_db;
CREATE DATABASE ecotrade_db;

CREATE TABLE user (
    id INT AUTO_INCREMENT,
    name VARCHAR(255),
    email VARCHAR(255),
    username VARCHAR(255),
    contactNo INT,
    password VARCHAR(255),
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY(id)
);

CREATE TABLE Item_Ads (
    p_id INT AUTO_INCREMENT,
    seller_id INT,
    item_name VARCHAR(255),
    item_category VARCHAR(255),
    item_desc TEXT,
    item_price DOUBLE,
    item_location VARCHAR(255),
    selling_format VARCHAR(255),
    negotiable VARCHAR(255),
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(255),
    PRIMARY KEY(p_id),
    FOREIGN KEY (seller_id) REFERENCES user(id) ON DELETE CASCADE
);

CREATE TABLE forgot_password (
    pwdResetid INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    pwdResetemail TEXT NOT NULL,
    pwdResetSelector TEXT NOT NULL,
    pwdresetToken LONGTEXT NOT NULL,
    pwdResetExpires TEXT NOT NULL
);

CREATE TABLE Moderator (
    id INT AUTO_INCREMENT,
    firstname VARCHAR(255),
    lastname VARCHAR(255),
    username VARCHAR(255),
    email VARCHAR(255),
    tel_no INT,
    password VARCHAR(255),
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY(id)
);

CREATE TABLE Administrator (
    id INT AUTO_INCREMENT,
    username VARCHAR(255),
    email VARCHAR(255),
    tel_no INT,
    password VARCHAR(255),
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY(id)
);

INSERT INTO Administrator(username,email, password) VALUES ("inu","inuka@12", "123123");
